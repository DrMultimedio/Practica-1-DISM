<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

    <link rel="stylesheet" href="../css/themes/default/jquery.mobile-1.4.5.min.css">
	<script src="../js/jquery.js"></script>
    <script src="../js/jquery.mobile-1.4.5.min.js"></script>
    <script type="text/javascript" src="cordova.js"></script>
    <link rel="shortcut icon" href="../favicon.ico">
 
<script>

function testAjax() {
$.ajax({
    url: 'https://dev.datos.ua.es/uapi/cbhRxH5tKsAxEerHUUvT/datasets/11/data',
type: 'GET',
dataType:"jsonp",
success: function(data) {
    //$('body').append('<pre>' + JSON.stringify(data, null, 2) + '</pre>');
    var edificios = data;
    $(edificios).each(function (index, datos) {
        var pos = datos.bbox.split(",");
        $('body').append("<div><h5> Nombre:" + datos.nombre + "</h5>" + "<ul><li>Latitud:" + pos[0] + "</li><li>Longitud " + pos[1] + "</li><li>Plantas " + datos.plantas + "</ul><button onclick='initMap("+ pos[0] +","+ pos[1]+")'>Ver edificio</button></div>");

})


},
error: function(jqXHR, textStatus, error) {
alert( "error: " + jqXHR.responseText);
}
});


}
</script>


    <title>Aplicaçao</title>
</head>
<body>

    <!-- Start of first page: #one -->
    <div data-role="page" id="landing">

        <div data-role="header">
            <h1>Aplicasión tope chida</h1>
        </div><!-- /header -->

        <div role="main" class="ui-content">
            <p><a href="#mapasolopage" class="ui-btn ui-shadow ui-corner-all">Mapa</a></p>
            <p><a href="#creditos" class="ui-btn ui-shadow ui-corner-all">Creditos</a></p>
            <p><a href="#two" class="ui-btn ui-shadow ui-corner-all">Lista de edificios</a></p>
            <p><a href="#popup" class="ui-btn ui-shadow ui-corner-all" data-rel="dialog" data-transition="pop">Show page "popup" (as a dialog)</a></p>
        </div><!-- /content -->

        <div data-role="footer" data-theme="a">
            <h4>By Jose :></h4>
        </div><!-- /footer -->

    </div><!-- /page one -->

    <!-- Pagina mapa #mapasolopage-->
    <!-- Pagina mapa #mapasolopage-->
    <div data-role="page" id="mapasolopage" data-theme="a">

        <div data-role="header">
            <h1>Mapa</h1>
        </div><!-- /header -->

        <div role="main" class="ui-content" id="mapasolo" style="height: 30em;">
            <h2>Two</h2>
            <div id= "map" style="width: 500px; height: 400px;">LA CARGA DEL MAPA HA FALLADO</div>
        </div><!-- /content -->

        <div data-role="footer">
            <p><a href="#landing" data-direction="reverse" class="ui-btn ui-shadow ui-corner-all ui-btn-b">Volver</a></p>
        </div><!-- /footer -->

    </div>
    <!-- /pagina mapa -->
    <!-- /pagina mapa -->
	    <!-- pagina creditos #creditos -->
	    <div data-role="page" id="creditos" data-theme="a">

            <div data-role="header">
                <h1>Créditos</h1>
            </div><!-- /header -->

        <div role="main" class="ui-content">
            <h2>Jose Manuel Palau Alegría</h2>
			Ingeniería multimedia, Universidad de Alicante
			
        </div><!-- /content -->

        <div data-role="footer">
            <p><a href="#landing" data-direction="reverse" class="ui-btn ui-shadow ui-corner-all ui-btn-b">Volver</a></p>
        </div><!-- /footer -->

    </div><!-- /creditos -->

    <!-- Start of third page: #popup -->
    <div data-role="page" id="popup">
        <div data-role="header" data-theme="b">
            <h1>Dialog</h1>
        </div><!-- /header -->
        <div role="main" class="ui-content">
            <h2>Popup</h2>
            <p>I have an id of "popup" on my page container and only look like a dialog because the link to me had a <code>data-rel="dialog"</code> attribute which gives me this inset look and a <code>data-transition="pop"</code> attribute to change the transition to pop. Without this, I'd be styled as a normal page.</p>
            <p><a href="#one" data-rel="back" class="ui-btn ui-shadow ui-corner-all ui-btn-inline ui-icon-back ui-btn-icon-left">Volver</a></p>
        </div><!-- /content -->
        <div data-role="footer">
            <h4>Page Footer</h4>
        </div><!-- /footer -->
    </div><!-- /page popup -->
	<script>
        function initMapSimple() {
			var map = new google.maps.Map(document.getElementById('mapasolo'), {
				zoom: 16,
				center: { lat: 38.385023, lng: -0.513040 }
			});
			window.scrollTo(0, 0);
	}
	</script>
	<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAm3HeeGNdlwrM9RnsLfKM5R18vP0BAaWg&signed_in=true&callback=initMapSimple"></script>
</body>
</html>